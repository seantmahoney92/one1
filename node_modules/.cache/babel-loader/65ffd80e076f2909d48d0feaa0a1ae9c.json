{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport React from \"react\";\nimport { List, message, Avatar, Spin } from 'antd';\nimport reqwest from 'reqwest';\nimport WindowScroller from 'react-virtualized/dist/commonjs/WindowScroller';\nimport AutoSizer from 'react-virtualized/dist/commonjs/AutoSizer';\nimport VList from 'react-virtualized/dist/commonjs/List';\nimport InfiniteLoader from 'react-virtualized/dist/commonjs/InfiniteLoader';\nvar fakeDataUrl = 'https://randomuser.me/api/?results=5&inc=name,gender,email,nat&noinfo';\n\nvar VirtualizedExample =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(VirtualizedExample, _React$Component);\n\n  function VirtualizedExample() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, VirtualizedExample);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(VirtualizedExample)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      data: [],\n      loading: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"loadedRowsMap\", {});\n\n    _defineProperty(_assertThisInitialized(_this), \"getData\", function (callback) {\n      reqwest({\n        url: fakeDataUrl,\n        type: 'json',\n        method: 'get',\n        contentType: 'application/json',\n        success: function success(res) {\n          callback(res);\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleInfiniteOnLoad\", function (_ref) {\n      var startIndex = _ref.startIndex,\n          stopIndex = _ref.stopIndex;\n      var data = _this.state.data;\n\n      _this.setState({\n        loading: true\n      });\n\n      for (var i = startIndex; i <= stopIndex; i++) {\n        // 1 means loading\n        _this.loadedRowsMap[i] = 1;\n      }\n\n      if (data.length > 19) {\n        message.warning('Virtualized List loaded all');\n\n        _this.setState({\n          loading: false\n        });\n\n        return;\n      }\n\n      _this.getData(function (res) {\n        data = data.concat(res.results);\n\n        _this.setState({\n          data: data,\n          loading: false\n        });\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"isRowLoaded\", function (_ref2) {\n      var index = _ref2.index;\n      return !!_this.loadedRowsMap[index];\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderItem\", function (_ref3) {\n      var index = _ref3.index,\n          key = _ref3.key,\n          style = _ref3.style;\n      var data = _this.state.data;\n      var item = data[index];\n      return React.createElement(List.Item, {\n        key: key,\n        style: style\n      }, React.createElement(List.Item.Meta, {\n        avatar: React.createElement(Avatar, {\n          src: \"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\"\n        }),\n        title: React.createElement(\"a\", {\n          href: \"https://ant.design\"\n        }, item.name.last),\n        description: item.email\n      }), React.createElement(\"div\", null, \"Content\"));\n    });\n\n    return _this;\n  }\n\n  _createClass(VirtualizedExample, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.getData(function (res) {\n        _this2.setState({\n          data: res.results\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var data = this.state.data;\n\n      var vlist = function vlist(_ref4) {\n        var height = _ref4.height,\n            isScrolling = _ref4.isScrolling,\n            onChildScroll = _ref4.onChildScroll,\n            scrollTop = _ref4.scrollTop,\n            onRowsRendered = _ref4.onRowsRendered,\n            width = _ref4.width;\n        return React.createElement(VList, {\n          autoHeight: true,\n          height: height,\n          isScrolling: isScrolling,\n          onScroll: onChildScroll,\n          overscanRowCount: 2,\n          rowCount: data.length,\n          rowHeight: 73,\n          rowRenderer: _this3.renderItem,\n          onRowsRendered: onRowsRendered,\n          scrollTop: scrollTop,\n          width: width\n        });\n      };\n\n      var autoSize = function autoSize(_ref5) {\n        var height = _ref5.height,\n            isScrolling = _ref5.isScrolling,\n            onChildScroll = _ref5.onChildScroll,\n            scrollTop = _ref5.scrollTop,\n            onRowsRendered = _ref5.onRowsRendered;\n        return React.createElement(AutoSizer, {\n          disableHeight: true\n        }, function (_ref6) {\n          var width = _ref6.width;\n          return vlist({\n            height: height,\n            isScrolling: isScrolling,\n            onChildScroll: onChildScroll,\n            scrollTop: scrollTop,\n            onRowsRendered: onRowsRendered,\n            width: width\n          });\n        });\n      };\n\n      var infiniteLoader = function infiniteLoader(_ref7) {\n        var height = _ref7.height,\n            isScrolling = _ref7.isScrolling,\n            onChildScroll = _ref7.onChildScroll,\n            scrollTop = _ref7.scrollTop;\n        return React.createElement(InfiniteLoader, {\n          isRowLoaded: _this3.isRowLoaded,\n          loadMoreRows: _this3.handleInfiniteOnLoad,\n          rowCount: data.length\n        }, function (_ref8) {\n          var onRowsRendered = _ref8.onRowsRendered;\n          return autoSize({\n            height: height,\n            isScrolling: isScrolling,\n            onChildScroll: onChildScroll,\n            scrollTop: scrollTop,\n            onRowsRendered: onRowsRendered\n          });\n        });\n      };\n\n      return React.createElement(List, null, data.length > 0 && React.createElement(WindowScroller, null, infiniteLoader), this.state.loading && React.createElement(Spin, {\n        className: \"demo-loading\"\n      }));\n    }\n  }]);\n\n  return VirtualizedExample;\n}(React.Component);\n\nexport default VirtualizedExample;","map":null,"metadata":{},"sourceType":"module"}