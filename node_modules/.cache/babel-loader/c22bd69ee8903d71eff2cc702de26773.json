{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport React from \"react\";\nimport { Select, Spin } from 'antd';\nimport debounce from 'lodash/debounce';\nvar Option = Select.Option;\n\nvar UserRemoteSelect =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(UserRemoteSelect, _React$Component);\n\n  function UserRemoteSelect(props) {\n    var _this;\n\n    _classCallCheck(this, UserRemoteSelect);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(UserRemoteSelect).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      data: [],\n      value: [],\n      fetching: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"fetchUser\", function (value) {\n      console.log('fetching user', value);\n      _this.lastFetchId += 1;\n      var fetchId = _this.lastFetchId;\n\n      _this.setState({\n        data: [],\n        fetching: true\n      });\n\n      fetch('https://randomuser.me/api/?results=5').then(function (response) {\n        return response.json();\n      }).then(function (body) {\n        if (fetchId !== _this.lastFetchId) {\n          // for fetch callback order\n          return;\n        }\n\n        var data = body.results.map(function (user) {\n          return {\n            text: \"\".concat(user.name.first, \" \").concat(user.name.last),\n            value: user.login.username\n          };\n        });\n\n        _this.setState({\n          data: data,\n          fetching: false\n        });\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChange\", function (value) {\n      _this.setState({\n        value: value,\n        data: [],\n        fetching: false\n      });\n    });\n\n    _this.lastFetchId = 0;\n    _this.fetchUser = debounce(_this.fetchUser, 800);\n    return _this;\n  }\n\n  _createClass(UserRemoteSelect, [{\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          fetching = _this$state.fetching,\n          data = _this$state.data,\n          value = _this$state.value;\n      return React.createElement(Select, {\n        mode: \"multiple\",\n        labelInValue: true,\n        value: value,\n        placeholder: \"Select users\",\n        notFoundContent: fetching ? React.createElement(Spin, {\n          size: \"small\"\n        }) : null,\n        filterOption: false,\n        onSearch: this.fetchUser,\n        onChange: this.handleChange,\n        style: {\n          width: '100%'\n        }\n      }, data.map(function (d) {\n        return React.createElement(Option, {\n          key: d.value\n        }, d.text);\n      }));\n    }\n  }]);\n\n  return UserRemoteSelect;\n}(React.Component);\n\nexport default UserRemoteSelect;","map":null,"metadata":{},"sourceType":"module"}